# Doctor Performance Dashboard (Patients handled & Readmissions)
SELECT 
    d.doctor_name,
    d.specialty,
    COUNT(a.admission_id) AS patients_treated,
    SUM(CASE WHEN a.readmitted_within_30_days THEN 1 ELSE 0 END) AS readmissions,
    ROUND(SUM(CASE WHEN a.readmitted_within_30_days THEN 1 ELSE 0 END)::decimal 
          / COUNT(a.admission_id) * 100, 2) AS readmission_rate
FROM admissions a
JOIN doctors d ON a.doctor_id = d.doctor_id
GROUP BY d.doctor_name, d.specialty
ORDER BY patients_treated DESC;

